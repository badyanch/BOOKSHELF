{"mappings":"6oBACA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAcC,aAAaC,QAAQ,eAEzC,GAAIF,EAAa,CAChB,MAAMG,EAAWC,KAAKC,MAAML,GAE5B,GAAIG,EAASG,eAAe,YAAa,CAExC,OADmBH,EAASI,QAE7B,CACD,CAEOC,eAAeC,EAAaC,GAClC,MAAMC,EAAY,GAElB,IAAK,MAAMC,KAAMF,EAAK,CACrB,MAAMG,QAAiB,EAAAf,EAAAgB,iBAAgBF,GACvCD,EAAUI,KAAKF,EAASG,KACzB,CACA,OAAOL,CACR,C,ICtBAZ,EAAA,S,WCAA,IAAAkB,EAAAlB,EAAA,S,0BAIA,MAAMmB,EAAwBC,SAASC,cAAc,6BAC/CC,EAAoBF,SAASC,cAAc,8BAEjD,GAAInB,aAAaC,QAAQ,eAAgB,CACxC,IAAIF,EAAcI,KAAKC,MAAMJ,aAAaC,QAAQ,gBAElD,GAAIF,EAAYM,eAAe,YAAa,CAC3C,IAAIC,EAAWP,EAAYO,SACvBe,EAAc,IAElB,EAAAL,EAAAR,cAAaF,GACXgB,MAAMZ,IACNW,EAAcX,EACd,MAAMa,EAAgBF,EAAYG,KAElC,UAA4BC,WAC3BA,EAAUC,OACVA,EAAMC,UACNA,EAASC,YACTA,EAAWC,MACXA,EAAKC,UACLA,EAASC,IACTA,IAEA,MAAMC,EAAwBd,SAASe,cAAc,OACrDD,EAAsBE,UAAUC,IAAI,2BACpCH,EAAsBI,QAAQzB,GAAKoB,EAEnC,MAAMM,EAAiB,2BACJZ,qCAA8CI,yGAEtBA,wDACDF,6DACMC,GAAe,4FACpBF,mMAKnBI,EAAU,GAAGQ,kNAKbR,EAAU,GAAGQ,iNAKbR,EAAU,GAAGQ,4OAWrC,OAFAN,EAAsBO,UAAYF,EAE3BL,CACR,IAEA,MAAMQ,EAA2BtB,SAASe,cAAc,OAGxD,SAASQ,IACRD,EAAyBD,UAAY,GAEb,IAApBjC,EAASoC,OACZF,EAAyBG,YAAYvB,GAErCG,EAAcqB,SAASC,IACtBL,EAAyBG,YAAYE,EAAA,GAGxC,CAZAL,EAAyBN,UAAUC,IAAI,4BAcvCM,IAEAxB,EAAsB6B,YAAYN,GAElCA,EAAyBO,iBAAiB,SAiB1C,SAA8BC,GAC7B,GAAIA,EAAMC,OAAOf,UAAUgB,SAAS,kBAAmB,EAhBxD,SAAoCvC,GACnC,MAAMwC,EAAO,IAAI,EAAAC,EAAAC,MAIjB,GAHA/C,EAAWA,EAASgD,QAAQT,GAASA,EAAKd,MAAQpB,IAClDwC,EAAKI,mBAAmB5C,EAAI6C,EAAAC,KAAK1D,YAAY2D,OAErB,IAApBpD,EAASoC,OACZD,QACM,CACwBD,EAAyBrB,cACtD,aAAaR,OAEQgD,QACvB,CACD,CAMEC,CAFsBZ,EAAMC,OAAOY,QAAQ,4BAClBzB,QAAQzB,GAElC,CACD,OAEAmD,OAAOC,IACPC,QAAQD,MAAM,+BAAgCA,EAAA,GAEjD,MACC9C,EAAsB0B,YAAYvB,EAEpC,C","sources":["src/js/test/shoppData.js","src/ShoppingPage.js","src/js/shoppingList.js"],"sourcesContent":["\nimport { fetchBooksForID } from \"../API\";\n\nconst currentUser = localStorage.getItem(\"currentUser\");\n\nif (currentUser) {\n\tconst userData = JSON.parse(currentUser);\n\n\tif (userData.hasOwnProperty(\"wishList\")) {\n\t\tlet arrayOfBooks = userData.wishList\n\t\treturn arrayOfBooks;\n\t}\n}\n\nexport async function getBooksData(ids) {\n\tconst booksData = [];\n\n\tfor (const id of ids) {\n\t\tconst bookData = await fetchBooksForID(id);\n\t\tbooksData.push(bookData.data);\n\t}\n\treturn booksData;\n}","import './js/API';\nimport './js/authentication/form';\n\n\n// import './js/handlers/bookCategory';\n// import './js/handlers/markup-category-list';\n\nimport './js/shoppingList';\n\nimport './js/test/mobileMenu';\nimport './js/test/swiper-supportUkraine';\n\nimport './js/header/index';\n\nimport './js/switcher-theme-fn';\n// ","import { getBooksData } from \"./test/shoppData\";\nimport { User } from \"./authentication/authorization\";\nimport { auth } from './authentication/firebase';\n\nconst shoppingListContainer = document.querySelector('.shopping-list__container');\nconst emptyShoppingList = document.querySelector('.shopping-list__empty-page');\n\nif (localStorage.getItem('currentUser')) {\n\tlet currentUser = JSON.parse(localStorage.getItem('currentUser'));\n\n\tif (currentUser.hasOwnProperty('wishList')) {\n\t\tlet wishList = currentUser.wishList;\n\t\tlet dataOfBooks = [];\n\n\t\tgetBooksData(wishList)\n\t\t\t.then((booksData) => {\n\t\t\t\tdataOfBooks = booksData;\n\t\t\t\tconst shoplistBooks = dataOfBooks.map(makeShoplistMarkup);\n\n\t\t\t\tfunction makeShoplistMarkup({\n\t\t\t\t\tbook_image,\n\t\t\t\t\tauthor,\n\t\t\t\t\tlist_name,\n\t\t\t\t\tdescription,\n\t\t\t\t\ttitle,\n\t\t\t\t\tbuy_links,\n\t\t\t\t\t_id,\n\t\t\t\t}) {\n\t\t\t\t\tconst shoplistBookContainer = document.createElement('div');\n\t\t\t\t\tshoplistBookContainer.classList.add('shoplist-book-container');\n\t\t\t\t\tshoplistBookContainer.dataset.id = _id;\n\n\t\t\t\t\tconst shoplistMarkup = `\n            <img src=\"${book_image}\" class=\"shoplist-book-img\" alt=\"${title}\">\n            <div class=\"shoplist-desc-container\">\n              <h4 class=\"shoplist-book-title\">${title}</h4>\n              <p class=\"shoplist-book-genre\">${list_name}</p>\n              <p class=\"shoplist-book-description\">${description || 'Sorry, book\\'s description not found'}</p>\n              <p class=\"shoplist-book-author\">${author}</p>\n            </div>\n            <div class=\"shoplist-icons\">\n              <ul class=\"shoplist-icons-list\">\n                <li class=\"shoplist-icons-li\">\n                  <a href=\"${buy_links[0].url}\" target=\"_blank\">\n                    <div class=\"shoplist-icon-amazon\"></div>\n                  </a>\n                </li>\n                <li class=\"shoplist-icons-li\">\n                  <a href=\"${buy_links[1].url}\" target=\"_blank\">\n                    <div class=\"shoplist-icon-ibook\"></div>\n                  </a>\n                </li>\n                <li class=\"shoplist-icons-li\">\n                  <a href=\"${buy_links[4].url}\" target=\"_blank\">\n                    <div class=\"shoplist-icon-bookshop\"></div>\n                  </a>\n                </li>\n              </ul>\n            </div>\n            <div class=\"shoplist-trash\"></div>\n          `;\n\n\t\t\t\t\tshoplistBookContainer.innerHTML = shoplistMarkup;\n\n\t\t\t\t\treturn shoplistBookContainer;\n\t\t\t\t}\n\n\t\t\t\tconst newShoppingListContainer = document.createElement('div');\n\t\t\t\tnewShoppingListContainer.classList.add('shopping-list__container');\n\n\t\t\t\tfunction updateShoppingListContainer() {\n\t\t\t\t\tnewShoppingListContainer.innerHTML = '';\n\n\t\t\t\t\tif (wishList.length === 0) {\n\t\t\t\t\t\tnewShoppingListContainer.appendChild(emptyShoppingList);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshoplistBooks.forEach((book) => {\n\t\t\t\t\t\t\tnewShoppingListContainer.appendChild(book);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tupdateShoppingListContainer();\n\n\t\t\t\tshoppingListContainer.replaceWith(newShoppingListContainer);\n\n\t\t\t\tnewShoppingListContainer.addEventListener('click', handleTrashIconClick);\n\n\t\t\t\tfunction removeBookFromShoppingList(id) {\n\t\t\t\t\tconst user = new User();\n\t\t\t\t\twishList = wishList.filter((book) => book._id !== id);\n\t\t\t\t\tuser.removeFromWishlist(id, auth.currentUser.email);\n\n\t\t\t\t\tif (wishList.length === 0) {\n\t\t\t\t\t\tupdateShoppingListContainer();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst bookContainerToRemove = newShoppingListContainer.querySelector(\n\t\t\t\t\t\t\t`[data-id=\"${id}\"]`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbookContainerToRemove.remove();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction handleTrashIconClick(event) {\n\t\t\t\t\tif (event.target.classList.contains('shoplist-trash')) {\n\t\t\t\t\t\tconst bookContainer = event.target.closest('.shoplist-book-container');\n\t\t\t\t\t\tconst id = bookContainer.dataset.id;\n\t\t\t\t\t\tremoveBookFromShoppingList(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('Error retrieving books data:', error);\n\t\t\t});\n\t} else {\n\t\tshoppingListContainer.appendChild(emptyShoppingList);\n\t}\n}\n"],"names":["$cTOKP","parcelRequire","currentUser","localStorage","getItem","userData","JSON","parse","hasOwnProperty","wishList","async","getBooksData","ids","booksData","id","bookData","fetchBooksForID","push","data","$9Jurp","$e608521657d26110$var$shoppingListContainer","document","querySelector","$e608521657d26110$var$emptyShoppingList","dataOfBooks","then","shoplistBooks","map","book_image","author","list_name","description","title","buy_links","_id","shoplistBookContainer","createElement","classList","add","dataset","shoplistMarkup","url","innerHTML","newShoppingListContainer","updateShoppingListContainer","length","appendChild","forEach","book","replaceWith","addEventListener","event","target","contains","user","$dQL0x","User","filter","removeFromWishlist","$kAe2l","auth","email","remove","removeBookFromShoppingList","closest","catch","error","console"],"version":3,"file":"ShoppingPage.24cf9824.js.map"}